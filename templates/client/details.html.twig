{% extends 'base.html.twig' %}

{% block title %}{{"client list"}}{% endblock %}
{% block stylesheets %} 
    <link rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css" /> {% endblock %}
{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 1280px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="container">
    <table id="" class="table fs-3">
            <tr>
                <th>{{"Firstname"}}</th>
                <td>{{clients.getFirstName()}}</td>
            </tr>
            <tr>
                <th>{{"Lastname"}}</th>
                <td>{{clients.getLastName()}}</td>
            </tr>
            <tr>
                <th>{{"Birthdate"}}</th>
                <td>{{clients.getBirthDate().format("d-m-Y")}}</td>
            </tr>
            <tr>
                <th>{{"Adress"}}</th>
                <td>{{clients.getAdress()}}</td>
            </tr>
            <tr>
                <th>{{"City"}}</th>
                <td>{{clients.getCity()}}</td>
            </tr>
            <tr>
                <th>{{"Email"}}</th>
                <td>{{clients.getMail()}}</td>
            </tr>
            <tr>
                <th>{{"Phone"}}</th>
                <td>{{clients.getPhone()}}</td>
            </tr>        
    </table>
    <br>
    {% if bookList|length > 0%}
    <h2 class="fs-1 fw-bold">{{'Borrowed book by'}} {{clients.getFirstName()}}</h2>
    <br>
    <table id="myTable" class=" table display fs-3">
        <thead>
            <th>{{"Title"}}</th>
            <th>{{"Author"}}</th>
            <th>{{"Category"}}</th>
            <th></th>
        </thead>
        <tbody>
        {% for book in bookList %}
            <tr>
                <td>{{book.getBooks().getTitle()}}</td>
                <td>{{book.getBooks().getAuthor()}}</td>
                <td>{{book.getBooks().getCategory()}}</td>
                <td>{% if book.getBooks().getAvailable() %}
                        <a class="btn btn-primary" href={{path("book_return", {id : book.getId()})}}>{{'Return'}}</a>
                    {% else %}
                        {% for borrow in book.getBorrows() %}
                            {{borrow.getDateRendered()}}
                        {% endfor %}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript"
      charset="utf8"
      src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"> 
</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script>
$(document).ready(function() {
    $('#myTable').DataTable({
        columnsDefs: [
            { "width": "50%","targets":2 }
        ],
        language: {
        }
        responsive:true
    });
    
} );
</script>
{% endblock %}